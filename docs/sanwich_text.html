<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/autosize.js/6.0.1/autosize.min.js" integrity="sha512-OjjaC+tijryqhyPqy7jWSPCRj7fcosu1zreTX1k+OWSwu6uSqLLQ2kxaqL9UpR7xFaPsCwhMf1bQABw2rCxMbg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    tailwind.config = {
      // デフォルトのまま使うので何も書かない
    };
  </script>
  <style type="text/tailwindcss">
    .input-field {
      @apply w-full border-2 p-1
    }
  </style>
</head>

<body class="bg-slate-200">

  <!-- ------------------------------------------------------------------- -->
  <!-- Prefix, Content, Suffix Form -->
  <!-- ------------------------------------------------------------------- -->
  <div class="flex px-8 py-4">
    <div class="w-1/4 pr-2">
      <label for="Prefix">Prefix</label>
      <input type="text" id="Prefix" name="prefix" value='sql.append("' placeholder=" Prefix" class="input-field">
    </div>
    <div class="w-2/4 grow">
      <label for="Content">Content</label>
      <textarea id="Content" name="content" class="input-field">SELECT
  *
FROM
  hoge
WHERE
  1=1
  AND fuga = piyo
ORDER BY
  foo DESC</textarea>
    </div>
    <div class="w-1/4 pl-2">
      <label for="Suffix">Suffix</label>
      <input type="text" id="Suffix" name="suffix" value='");' placeholder="Suffix" class="input-field">
    </div>
  </div>

  <!-- ------------------------------------------------------------------- -->
  <!-- Output Area -->
  <!-- ------------------------------------------------------------------- -->
  <div class="flex px-8 py-4">
    <div class="w-full grow">
      <label for="Output">Output</label>
      <textarea id="Output" name="output" class="input-field" readonly></textarea>
    </div>
  </div>

  <script>
    (() => {
      'use strict';

      const sandwich = () => {
        const outputValue = Content.value.split(/\r?\n/g).map(row => Prefix.value + row + Suffix.value).join('\n');
        Output.value = outputValue;
        autosize.update(Output);
      };

      autosize(Content);
      autosize(Output);
      sandwich();

      Prefix.addEventListener('input', sandwich);
      Content.addEventListener('input', sandwich);
      Suffix.addEventListener('input', sandwich);
    })();
  </script>
</body>

</html>